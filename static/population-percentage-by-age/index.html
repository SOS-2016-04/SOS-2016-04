    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Resources</title>
        <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/default/easyui.css">
        <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/icon.css">
        <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/color.css">
        <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/demo/demo.css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.min.js"></script>
        <script type="text/javascript" src="http://www.jeasyui.com/easyui/jquery.easyui.min.js"></script>

<script type="text/javascript">



function registra_recurso(){

    $('#win').window('close');

var country = document.getElementById("country").value;
                var year = document.getElementById("year").value;
                var population_0_14 = document.getElementById("population_0_14").value;
                var population_15_64 = document.getElementById("population_15_64").value;
                var dobles_comillas = String.fromCharCode(34);

                var url = "/api/v1/population-percentage-by-age";
                var data = "{"+dobles_comillas+"country"+dobles_comillas+":"+dobles_comillas+country+dobles_comillas+","+dobles_comillas+"year"+dobles_comillas+":"+year+","+dobles_comillas+"population_0_14"+dobles_comillas+":"+population_0_14+","+dobles_comillas+"population_15_64"+dobles_comillas+":"+population_15_64+"}";



                var dataJS = JSON.parse(data);

                


                url = url + "?apikey=" + "secret";


                var request = $.ajax({
                url : url,
                type : "POST",
                data: data,
            dataType: "JSON",
            contentType: "application/json"
            });


                var request = $.ajax({
                url : "/api/v1/population-percentage-by-age?apikey=secret"
            });

            request.done((data,status) =>{

                $('#tabladatos').datagrid('loadData',data);
                $('#tabladatos').datagrid('getData');

            });




}


            function newUser(){



                document.getElementById("formulario_registro").style.hidden = "none";


                   $('#win').window({
                     width:600,
                     height:400,
                     modal:true
    }); 




        }








                function editUser(){
            }






            function destroyUser(){

                var row = $('#tabladatos').datagrid('getSelected');
                var url = "/api/v1/population-percentage-by-age";
                url = url + "/" + row.country + "/" + row.year + "?apikey=" + "secret";

                console.log(row.country);

               var request = $.ajax({
                url : url,
                type : "DELETE"
            });


               request.done((data,status) =>{



                var request = $.ajax({
                url : "/api/v1/population-percentage-by-age?apikey=secret"
            });


                request.done((data,status) =>{

                    console.log(data);

                $('#tabladatos').datagrid('loadData',data);
                $('#tabladatos').datagrid('getData');

            });


            });




            }




</script>



<script>
        $(document).ready(() => {


            var request = $.ajax({
                url : "/api/v1/population-percentage-by-age?apikey=secret"
            });

            request.done((data,status) =>{


                $('#tabladatos').datagrid({
                   data: data,
                   singleSelect : true,
                   toolbar: '#toolbar',
        columns:[[
            {field:'country',title:'Country',width:150},
            {field:'year',title:'Year',width:150},
            {field:'population_0_14',title:'Population_0_14',width:200},
            {field:'population_15_64',title:'Population_15_64',width:200}
        ]]
    });






            });


    });
</script>



    </head>
    <body>


    <center><table id="tabladatos" title="Resources" style="width:710px;height:250px"></table></center>



    <div id="toolbar">
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newUser()">New</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editUser()">Edit</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyUser()">Remove</a>
     <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-search" plain="true" onclick="newUser()">Search</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-load" plain="true" onclick="editUser()">Load</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-key" plain="true" onclick="destroyUser()">Apikey</a>
    </div>



    <div id="win">

    <form id="formulario_registro"   hidden="hidden"><br>
    Country: <input id="country"/><br><br>
    Year: <input id="year"/><br><br>
    Population_0_14: <input id="population_0_14"/><br><br>
    Population_15_64: <input id="population_15_64"/><br><br>
    <input type="button" value="Aceptar" onclick = "registra_recurso()";/><br><br>
    <input type="button" value="Cancelar"/>
    </form>    

    </div>





    </body>
    </html>